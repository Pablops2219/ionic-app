<ion-header>
  <ion-buttons slot="start">
    <ion-back-button defaultHref="/"></ion-back-button>
  </ion-buttons>
  <ion-img src="https://nostresport.com/wp-content/uploads/2024/01/unnamed-2-696x311.png"></ion-img>
  <ion-buttons>
    <ion-button color="light" size="large">
      <ion-icon slot="icon-only" ios="person-circle-outline" md="person-circle"></ion-icon>
    </ion-button>
  </ion-buttons>

</ion-header>

<ion-content color="tertiary">

  <ion-card class="profile-content">

    <div align="center" class="image">
      <ion-avatar>
        <img src={{users[0].icon}} alt="" />
      </ion-avatar>
    </div>

    <ion-item lines="none" class="profile">
      <ion-label class="ion-text-center">
        <ion-text color="secondary">{{users[0].name}} {{users[0].last_name}}</ion-text>
        <p>
          <ion-text color="medium">-------------------------</ion-text>
        </p>
        <ion-text color="secondary">{{users[0].coins}}</ion-text>
      </ion-label>
    </ion-item>

  </ion-card>

  <ion-card class="options">
    @for(row of getRows(); track $index) {
    <ion-row class="ion-margin" [ngClass]="{
          'borderBottom' : (($index + 1) * 3) < options.length,
          'paddingTop' : $index == 0
        }">
      @for(item of row; track $index) {
      <ion-col size="4" class="ion-text-center">

        <ion-label class="d-flex-center direction">
          <ion-button (click)="singOut()" expand="block" fill="clear" shape="round">
            <ion-avatar [style.background]="'var(--ion-color-' + (item.background || 'light') + ')'">
              <ion-icon [color]="item.color" [name]="item.icon"></ion-icon>
            </ion-avatar>
          </ion-button>
          <p>
            <ion-text color="primary">{{item?.title}}</ion-text>
          </p>
        </ion-label>

      </ion-col>
      }
    </ion-row>
    }
  </ion-card>

  <ion-title class="m-top">Mi garaje</ion-title>

  <swiper-container>
    <swiper-slide>
      <ion-card>
        <img class="car-img" alt="Car1" src={{users[0].vehicles[0].image}} />

        <ion-card color="primary" class="descripcionCoche">
          <ion-card-header>
            <ion-card-title>Detalles del coche</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-list class="ion-no-padding">
              <ion-item color="secondary">
                <ion-label>Matricula: {{users[0].vehicles[0].licensePlate}}</ion-label>
              </ion-item>

              <ion-item color="secondary">
                <ion-label>Marca: {{users[0].vehicles[0].make}}</ion-label>
              </ion-item>

              <ion-item color="secondary">
                <ion-label>Modelo: {{users[0].vehicles[0].model}}</ion-label>
              </ion-item>

              <ion-item color="secondary">
                <ion-label>Año: {{users[0].vehicles[0].year}}</ion-label>
              </ion-item>

              <ion-item color="secondary" lines="none">
                <ion-label>Color: {{users[0].vehicles[0].color}}</ion-label>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>

      </ion-card>
    </swiper-slide>
    <swiper-slide>
      <ion-card>
        <img alt="Car2"
          src="https://www.cochesyconcesionarios.com/media/cache/1024w/uploads/toyota/corolla/12/ha/toyota-corolla-hatchback-06-20a76562b0bb5004f7dffdac48933f8ef3f6b744.jpeg" />
        <ion-card color="primary" class="descripcionCoche">
          <ion-card-header>
            <ion-card-title>Detalles del coche</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-list class="ion-no-padding">
              <ion-item color="secondary">
                <ion-label>Matricula: {{users[1].vehicles[1].licensePlate}}</ion-label>
              </ion-item>

              <ion-item color="secondary">
                <ion-label>Marca: {{users[1].vehicles[1].make}}</ion-label>
              </ion-item>

              <ion-item color="secondary">
                <ion-label>Modelo: {{users[1].vehicles[1].model}}</ion-label>
              </ion-item>

              <ion-item color="secondary">
                <ion-label>Año: {{users[1].vehicles[1].year}}</ion-label>
              </ion-item>

              <ion-item color="secondary" lines="none">
                <ion-label>Color: {{users[1].vehicles[1].color}}</ion-label>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>


      </ion-card>
    </swiper-slide>

    <!-- <swiper-slide>
      <ion-card>
        <img alt="Car3"
          src="https://fotos.quecochemecompro.com/toyota-corolla/toyota-corolla-hibrido-naranja.jpeg?size=750x400" />
          <ion-card color="primary" class="descripcionCoche">
            <ion-card-header>
              <ion-card-title>Detalles del coche</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <ion-list class="ion-no-padding">
                <ion-item color="secondary">
                  <ion-label>Matricula: {{users[2].vehicles[2].licensePlate}}</ion-label>
                </ion-item>
        
                <ion-item color="secondary">
                  <ion-label>Marca: {{users[2].vehicles[2].make}}</ion-label>
                </ion-item>
        
                <ion-item color="secondary">
                  <ion-label>Modelo: {{users[2].vehicles[2].model}}</ion-label>
                </ion-item>
        
                <ion-item color="secondary">
                  <ion-label>Año: {{users[2].vehicles[2].year}}</ion-label>
                </ion-item>
        
                <ion-item color="secondary" lines="none">
                  <ion-label>Color: {{users[2].vehicles[2].color}}</ion-label>
                </ion-item>
              </ion-list>
            </ion-card-content>
          </ion-card>
    
          
      </ion-card>
    </swiper-slide> -->


  </swiper-container>





  <ion-text color="primary">
    <h1 class="ion-padding-start">Comparte tu coche!</h1>
  </ion-text>

  <div id="qrImage">

    <div class="d-flex-center">
      <div class="qr-wrapper d-flex-center">
        <qr-code [value]="qrText" size="190" errorCorrectionLevel="M"></qr-code>
        <img *ngIf="!qrText" src="assets/images/qr.webp" class="qr-placeholder" alt="">

      </div>
    </div>
  </div>

  <div class="d-flex-center">
    <ion-button (click)="captureScreen()" [disabled]="!qrText" class="submit ion-margin-top" expand="block"
      shape="round">
      Compartir
      <ion-icon slot="end" name="share-social-outline"></ion-icon>
    </ion-button>
  </div>

</ion-content>